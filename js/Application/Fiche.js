Global.include('dev/js/Application/SliderDiaporama.js');

Global.includeCSS('dev/css/Application/Fiche.css');

class Fiche extends DivObject {
    // constructor(div, poi, id) {
    constructor(poi, id, couleur) {
        super(poi._balise, id);

        this.signaux = {
            fermer: new signals.Signal()
        };

        this._id = id;
        this._poi = poi;
        this._couleur = couleur;
        this._ouvert = false;
        // this._langue = paramsJSON.langueParDefault;

        this.addClass('elementFiche');
        //permet la suppression de toutes les fiches avec $('.elementFiche').remove()

        var divFiche = new DivObject(this._balise, 'divFiche_' + this._id);
        divFiche.addClass("fiche");

        this._divTexte = new DivObject(divFiche._balise, "divtxt_" + this._id);
        this._divTexte.addClass('divTexte');
        this._titre = new BaliseObject(this._divTexte._balise, "h1");
        this._titre.css('color', couleur);
        this._titre.html(poi._title);
        this._sousTitre = new BaliseObject(this._divTexte._balise, "h3");
        this._sousTitre.html(poi._subtitle);
        this._texte = new BaliseObject(this._divTexte._balise, "p");
        this._texte.addClass('paraScroll');


        var bottom = new DivObject(this._divTexte._balise, "divBottom_" + id);
        bottom.addClass('divBottom');

        var ad = poi._address;
        var adressContent = "";
        if (ad.name === undefined)
            adressContent = 'Unknown Adress';
        else {
            if (ad.name != null && ad.name != "") { adressContent += '<b>' + ad.name + '</b>'; }
            if (ad.address != null && ad.address != "") { adressContent += '<br>' + ad.address; }
            if (ad.mail != null && ad.mail != "") { adressContent += "<br>" + ad.mail; }
            if (ad.tel != null && ad.tel != "") { adressContent += "<br>" + ad.tel; }
        }
        var divAdress = new DivObject(bottom._balise, 'divAdress_' + this._id);
        divAdress.addClass('divAdress');
        divAdress.html(adressContent);

        var divPartage = new DivObject(bottom._balise, 'partage_' + this._id);
        divPartage.addClass('divPartage');
        var divQR = new DivObject(divPartage._balise, 'qrCode_' + this._id);
        divQR.addClass('svg');
        var qr = '<svg id="CalqueQR_' + this._id + '" data-name="Calque QR Code ' + this._id + '" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.12 54.12"><defs><style>.cls-1{fill:' + couleur + ';}</style></defs><title>qrCode</title><rect class="cls-1" x="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="1.87" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="1.87" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="1.87" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="1.87" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="1.87" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="1.87" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="1.87" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="3.73" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="3.73" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="3.73" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="5.6" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="5.6" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="5.6" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="5.6" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="5.6" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="5.6" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="5.6" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="7.46" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="7.46" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="7.46" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="7.46" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="7.46" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="9.33" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="9.33" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="9.33" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="9.33" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="9.33" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="9.33" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="11.2" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="11.2" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="11.2" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="11.2" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="11.2" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="11.2" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="11.2" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="13.06" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="13.06" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="13.06" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="13.06" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="13.06" width="1.87" height="1.87"/><rect class="cls-1" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="3.73" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="5.6" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="9.33" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="11.2" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="13.06" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="14.93" width="1.87" height="1.87"/><rect class="cls-1" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="3.73" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="5.6" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="7.46" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="9.33" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="13.06" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="16.79" width="1.87" height="1.87"/><rect class="cls-1" x="1.87" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="5.6" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="11.2" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="13.06" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="18.66" width="1.87" height="1.87"/><rect class="cls-1" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="3.73" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="5.6" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="7.46" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="20.53" width="1.87" height="1.87"/><rect class="cls-1" x="9.33" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="11.2" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="13.06" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="22.39" width="1.87" height="1.87"/><rect class="cls-1" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="1.87" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="3.73" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="5.6" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="7.46" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="9.33" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="24.26" width="1.87" height="1.87"/><rect class="cls-1" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="1.87" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="9.33" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="11.2" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="26.13" width="1.87" height="1.87"/><rect class="cls-1" x="3.73" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="5.6" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="7.46" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="27.99" width="1.87" height="1.87"/>\
        <rect class="cls-1" x="26.13" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="27.99" width="1.87" height="1.87"/><rect class="cls-1" x="1.87" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="9.33" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="11.2" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="13.06" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="29.86" width="1.87" height="1.87"/><rect class="cls-1" x="3.73" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="13.06" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="31.72" width="1.87" height="1.87"/><rect class="cls-1" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="5.6" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="7.46" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="11.2" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="13.06" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="33.59" width="1.87" height="1.87"/><rect class="cls-1" x="3.73" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="5.6" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="7.46" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="35.46" width="1.87" height="1.87"/><rect class="cls-1" x="1.87" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="11.2" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="37.32" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="39.19" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="41.05" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="42.92" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="44.79" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="27.99" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="29.86" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="31.72" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="35.46" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="39.19" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="44.79" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="46.65" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="48.52" width="1.87" height="1.87"/><rect class="cls-1" x="18.66" y="48.52" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="48.52" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="48.52" width="1.87" height="1.87"/><rect class="cls-1" x="48.52" y="48.52" width="1.87" height="1.87"/><rect class="cls-1" x="52.25" y="48.52" width="1.87" height="1.87"/><rect class="cls-1" x="22.39" y="50.38" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="50.38" width="1.87" height="1.87"/><rect class="cls-1" x="41.05" y="50.38" width="1.87" height="1.87"/><rect class="cls-1" x="42.92" y="50.38" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="50.38" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="50.38" width="1.87" height="1.87"/><rect class="cls-1" x="14.93" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="16.79" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="20.53" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="24.26" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="26.13" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="33.59" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="37.32" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="46.65" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="50.38" y="52.25" width="1.87" height="1.87"/><rect class="cls-1" x="1.96" y="1.96" width="9.14" height="9.14"/><path class="cls-1" d="M211.85,325h-11.1v13.06h13.06V325Zm0,11.1h-9.14V327h9.14Z" transform="translate(-200.75 -325.02)"/><rect class="cls-1" x="43.01" y="1.96" width="9.14" height="9.14"/><path class="cls-1" d="M252.91,325H241.8v13.06h13.07V325Zm0,11.1h-9.15V327h9.15Z" transform="translate(-200.75 -325.02)"/><rect class="cls-1" x="1.96" y="43.01" width="9.14" height="9.14"/><path class="cls-1" d="M211.85,366.08h-11.1v13.06h13.06V366.08Zm0,11.1h-9.14V368h9.14Z" transform="translate(-200.75 -325.02)"/><rect class="cls-1" x="3.73" y="3.73" width="5.6" height="5.6"/><rect class="cls-1" x="44.79" y="3.73" width="5.6" height="5.6"/><rect class="cls-1" x="3.73" y="44.79" width="5.6" height="5.6"/></svg>';
        divQR.html(qr + '<div>Flasher le QR Code</div>');
        divQR._balise.click({fiche: this}, this.clickQR);

        var divTel = new DivObject(divPartage._balise, 'tel_' + this._id);
        divTel.addClass('svg');
        var tel = '<svg id="CalqueTEL_' + this._id + '" data-name="Calque tel ' + this._id + '" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36.97 48.57"><defs><style>.cls-1{fill:' + couleur + ';}.cls-2,.cls-3{fill:#fff;}.cls-3{stroke:' + couleur + ';stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title>sms</title><rect class="cls-1" width="26" height="48.57" rx="2.86" ry="2.86"/><rect class="cls-2" x="2.02" y="5.02" width="21.95" height="37.69" rx="1.69" ry="1.69"/><circle class="cls-2" cx="13" cy="45.93" r="1.4"/><rect class="cls-2" x="10.62" y="1.67" width="4.76" height="0.97" rx="0.49" ry="0.49"/><path class="cls-3" d="M234.52,339.74a10.45,10.45,0,0,0-9.91,13.85l-4.16,4.09h6.72a10.47,10.47,0,1,0,7.35-17.94Z" transform="translate(-209.02 -327.79)"/><path class="cls-1" d="M230.17,350.21a1,1,0,0,1,.26-.72,1,1,0,0,1,.75-.25,1,1,0,0,1,.73.25.94.94,0,0,1,.27.72,1,1,0,0,1-.27.72,1.17,1.17,0,0,1-1.47,0A.94.94,0,0,1,230.17,350.21Z" transform="translate(209.02 -327.79)"/><path class="cls-1" d="M233.51,350.21a1,1,0,0,1,.26-.72,1.24,1.24,0,0,1,1.49,0,1,1,0,0,1,.26.72,1,1,0,0,1-.27.72,1.17,1.17,0,0,1-1.47,0A.94.94,0,0,1,233.51,350.21Z" transform="translate(-209.02 -327.79)"/><path class="cls-1" d="M236.86,350.21a.94.94,0,0,1,.25-.72,1,1,0,0,1,.75-.25,1,1,0,0,1,.74.25,1,1,0,0,1,.26.72,1,1,0,0,1-.26.72,1.18,1.18,0,0,1-1.48,0A.94.94,0,0,1,236.86,350.21Z" transform="translate(209.02 -327.79)"/></svg>';
        divTel.html(tel + '<div>Partage par sms</div>');
        divTel._balise.click({fiche: this}, this.clickTel);

        var galerie = [];
        poi._galerie.forEach(element => {
            galerie.push(element.src);
        });

        var subContent = poi._subcontent;
        var txtContent = "";
        subContent.forEach(element => {
            txtContent += "<h3>" + element.title + "</h3>";
            txtContent += element.text;
            element.galerie.forEach(pic => {
                galerie.push(pic.src);
            });
        });

        this._texte.html(poi._text + txtContent);
        var s = $('<style></style>')
            .html(".fiche .paraScroll::-webkit-scrollbar-thumb {\
        background: "+ couleur + "; \
      }");
        this._texte._balise.after(s);

        if (poi._thumbnail != false) {
            galerie.push(poi._thumbnail);
        }
        if (galerie.length == 0)
            galerie.push('datas/imgs/menu/diaporama/logo.png');


        this._btFermer = new DivObject(this._divTexte._balise, this._id + "_BtFermer");
        this._btFermer.addClass("ficheBt");
        this._btFermer.addClass("ficheBtFermer");
        this._btFermer.css('background', couleur);
        this._btFermer.append('<div class="ficheBtFermerTexte">+</div>');
        this._btFermer.x = 500 - this._btFermer.width / 2;
        this._btFermer.y = - this._btFermer.height / 2;
        // fermeture de l'élément gérer dans utilsOpenseadragon.js -> removeOverlay()

        var divSlider = new DivObject(divFiche._balise, 'divSlider_' + this._id);
        divSlider.addClass('divSlider');
        new SliderDiaporama(divSlider._balise, 'slider_' + this._id, galerie, couleur, 500, 3, 0.5);

        this._overlay = ficheToOverlay(this);
        this._balise.toggle();

    }

    clickQR(e){
        var f = e.data.fiche;
        console.log(f._poi._site);
    }

    clickTel(e){
        var f = e.data.fiche;
        console.log('tel : ' + f._poi._site);
    }



    get fermerSignal() {
        return this.signaux.fermer;
    }
}